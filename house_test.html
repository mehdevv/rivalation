<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House System Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #1d1d1f;
            margin-bottom: 30px;
        }
        
        .houses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .house-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .house-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: #007AFF;
        }
        
        .house-title {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 10px;
        }
        
        .house-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .house-sections {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .section-tag {
            background: #007AFF;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .readonly-tag {
            background: #8E8E93;
        }
        
        .conditional-tag {
            background: #FF9500;
        }
        
        .test-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #007AFF;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üè† House System Test</h1>
        
        <div class="test-info">
            <h3>üìã Test Instructions</h3>
            <p>Click on any house card below to test the new house-specific button system. Each house now shows:</p>
            <ul>
                <li><strong>House-specific buttons</strong> based on the house structure</li>
                <li><strong>Section buttons</strong> for houses with multiple sections (e.g., Gestion d'Activit√©s shows "Tasks", "Feedback")</li>
                <li><strong>Form buttons</strong> for simple houses (e.g., Rival shows "Fill Form")</li>
                <li><strong>Icon indicators</strong> to show button types (üìù for forms, üìä for data, ‚öôÔ∏è for settings)</li>
                <li><strong>Proper names</strong> from the JSON data structure</li>
                <li><strong>Dynamic forms</strong> with correct field types (text, password, time, number, select, textarea)</li>
                <li><strong>Conditional fields</strong> for Entry Type selection</li>
                <li><strong>Read-only sections</strong> for Administration</li>
                <li><strong>Table fields</strong> for Priv√©</li>
            </ul>
        </div>
        
        <div class="houses-grid" id="housesGrid">
            <!-- Houses will be dynamically generated here -->
        </div>
    </div>

    <script>
        // House data from the JSON structure
        const houseData = {
            1: { id: 1, name: "Rival", fields: [
                { label: "Mot de passe", type: "password" }
            ]},
            2: { 
                id: 2, 
                name: "Centre d'Informations", 
                sections: [
                    { name: "S√©minaire", fields: [
                        { label: "Titres", type: "text" },
                        { label: "Heure de D√©part / Fin", type: "text" },
                        { label: "1er S√©ance", type: "text" },
                        { label: "2√©me S√©ance", type: "text" },
                        { label: "3√©me S√©ance", type: "text" },
                        { label: "N¬∞ d'attestations", type: "number" }
                    ]},
                    { name: "Phone", fields: [
                        { label: "Titres", type: "text" },
                        { label: "Heure de D√©part / Fin", type: "text" },
                        { label: "1er S√©ance", type: "text" },
                        { label: "2√©me S√©ance", type: "text" },
                        { label: "3√©me S√©ance", type: "text" },
                        { label: "N¬∞ d'attestations", type: "number" }
                    ]},
                    { name: "La Saisie", fields: [
                        { label: "Bon", type: "text" },
                        { label: "Bons Reste", type: "text" },
                        { label: "Bons Saisie", type: "text" },
                        { label: "Fiche D'inscription", type: "text" },
                        { label: "Fiche Reste", type: "text" },
                        { label: "Fiche Saisie", type: "text" },
                        { label: "Dipl√¥me", type: "text" },
                        { label: "Dip Reste", type: "text" },
                        { label: "Dip Saisie", type: "text" },
                        { label: "N¬∞ d'attestations", type: "number" }
                    ]},
                    { name: "Hygi√®ne", fields: [
                        { label: "Targa / Wilaya", type: "text" },
                        { label: "Fait par \"Player\"", type: "text" },
                        { label: "Pourcentage (50-75-100)", type: "number" }
                    ]}
                ]
            },
            3: { 
                id: 3, 
                name: "Administration", 
                sections: [
                    { name: "Id√©es D'am√©lioration", fields: [
                        { label: "Titres", type: "text" },
                        { label: "D√©tails", type: "textarea" }
                    ]},
                    { name: "Missions des Autres", type: "readonly", description: "Affiche les missions des autres selon Nom de Player (Juste Lecture)" },
                    { name: "Classement", type: "readonly", description: "Affiche le Classement" },
                    { name: "Coins Historique", type: "readonly", description: "Affiche l'historique selon Calendar" }
                ]
            },
            4: { 
                id: 4, 
                name: "Gestion d'Activit√©s", 
                sections: [
                    { name: "Taches", type: "readonly", description: "Lecture" },
                    { name: "Feedback", type: "readonly", description: "Lecture" },
                    { name: "Mission", fields: [
                        { label: "Missions", type: "table", columns: ["Mission 1", "Mission 2", "Mission 3", "..."] }
                    ]}
                ]
            },
            5: { 
                id: 5, 
                name: "Gestion Administrative", 
                sections: [
                    { name: "Dipl√¥me", fields: [
                        { label: "Nom Pr√©nom", type: "text" },
                        { label: "N¬∞ Tel", type: "text" },
                        { label: "Formation", type: "text" }
                    ]},
                    { name: "Fiche D'inscription", fields: [
                        { label: "Nom Pr√©nom", type: "text" },
                        { label: "N¬∞ Tel", type: "text" },
                        { label: "Formation", type: "text" }
                    ]},
                    { name: "Pr√©-inscription", fields: [
                        { label: "Nom Pr√©nom", type: "text" },
                        { label: "N¬∞ Tel", type: "text" },
                        { label: "Wilaya / Targa / FB", type: "text" },
                        { label: "Formation", type: "text" }
                    ]},
                    { name: "Caisse", fields: [
                        { label: "Fond de Caisse", type: "number" },
                        { label: "Bons", type: "number" },
                        { label: "D√©pense", type: "number" }
                    ]}
                ]
            },
            6: { 
                id: 6, 
                name: "Priv√©", 
                fields: [
                    { label: "Missions", type: "table", columns: ["Mission 1", "Mission 2", "Mission 3", "..."] }
                ]
            },
            7: { 
                id: 7, 
                name: "Pointage", 
                fields: [
                    { label: "Heure d'arriver", type: "time" },
                    { label: "Heure de Sortir", type: "time" },
                    { label: "Commentaire", type: "textarea" }
                ]
            },
            8: { 
                id: 8, 
                name: "M√©dias & Statistiques", 
                sections: [
                    { name: "Photo / Video", fields: [
                        { label: "Formation", type: "text" },
                        { label: "Grp", type: "text" },
                        { label: "La Date", type: "date" }
                    ]},
                    { name: "Soutenance", fields: [
                        { label: "Formation", type: "text" },
                        { label: "Grp", type: "text" }
                    ]},
                    { name: "Bilan de Paiement", fields: [
                        { label: "Formation", type: "text" },
                        { label: "Grp", type: "text" },
                        { label: "Pourcentage de Paiement", type: "number" }
                    ]},
                    { name: "Bilan de Pr√©sences", fields: [
                        { label: "Formation", type: "text" },
                        { label: "Grp", type: "text" },
                        { label: "Pourcentage de Pr√©sence", type: "number" }
                    ]},
                    { name: "N¬∞ D'√©tudiant", fields: [
                        { label: "Formation", type: "text" },
                        { label: "Grp", type: "text" },
                        { label: "Nomber", type: "number" }
                    ]},
                    { name: "Satisfaction Clients", type: "readonly", description: "Lecture" }
                ]
            }
        };

        // Generate house cards
        function generateHouseCards() {
            const grid = document.getElementById('housesGrid');
            
            Object.values(houseData).forEach(house => {
                const card = document.createElement('div');
                card.className = 'house-card';
                card.onclick = () => showHouseModal(house);
                
                let sectionsHTML = '';
                if (house.sections) {
                    sectionsHTML = house.sections.map(section => {
                        let tagClass = 'section-tag';
                        if (section.type === 'readonly') tagClass += ' readonly-tag';
                        if (section.conditionalGroups) tagClass += ' conditional-tag';
                        return `<span class="${tagClass}">${section.name}</span>`;
                    }).join('');
                } else if (house.fields) {
                    sectionsHTML = `<span class="section-tag">Form Fields (${house.fields.length})</span>`;
                }
                
                card.innerHTML = `
                    <div class="house-title">${house.name}</div>
                    <div class="house-description">
                        ${house.sections ? `Contains ${house.sections.length} sections` : `Contains ${house.fields ? house.fields.length : 0} fields`}
                    </div>
                    <div class="house-sections">${sectionsHTML}</div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        // Show house modal (simplified version)
        function showHouseModal(house) {
            let message = `üè† ${house.name}\n\nThis house has specific buttons based on its structure:\n\n`;
            
            if (house.sections) {
                message += `üìã Available Sections:\n`;
                house.sections.forEach((section, index) => {
                    let icon = '';
                    if (section.type === 'readonly') {
                        icon = 'üìä ';
                    } else if (section.conditionalGroups) {
                        icon = '‚öôÔ∏è ';
                    } else if (section.fields) {
                        icon = 'üìù ';
                    }
                    message += `${icon}${section.name}\n`;
                });
            } else if (house.fields) {
                message += `üìù Direct Form Fields (${house.fields.length} fields)`;
            }
            
            message += `\n\nClick "OK" to see the specific buttons for this house.`;
            alert(message);
            
            if (house.sections) {
                console.log('House sections:', house.sections);
                house.sections.forEach((section, index) => {
                    if (section.fields) {
                        console.log(`Section ${index + 1}: ${section.name}`, section.fields);
                    } else if (section.type === 'readonly') {
                        console.log(`Readonly section: ${section.name} - ${section.description}`);
                    } else if (section.conditionalGroups) {
                        console.log(`Conditional section: ${section.name}`, section.conditionalGroups);
                    }
                });
            } else if (house.fields) {
                console.log('House fields:', house.fields);
            }
        }
        
        // Initialize the test
        document.addEventListener('DOMContentLoaded', () => {
            generateHouseCards();
            console.log('üè† House System Test loaded successfully!');
            console.log('üìä House data structure:', houseData);
        });
    </script>
</body>
</html>
